{{define "content"}}
{{- if not (eq .HTMX.Request.Target "posts")}}
{{template "top-content" .}}
{{- end}}

{{template "posts" .}}

{{- if not (eq .HTMX.Request.Target "posts")}}
{{template "file-msg" .}}
{{- end}}
{{end}}

{{define "top-content"}}
<section class="section mb-4">
    <h1 class="text-2xl mb-4">Recent orders</h1>
    {{- if not .Data}}
    <div role="alert" class="alert shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-info shrink-0 w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <div>
            <h3 class="font-bold">You haven't order any ticket yet!</h3>
        </div>
        <a href='{{call .ToURL  "order"}}' class="btn btn-sm">Order</a>
    </div>
    {{end}}
</section>
{{end}}

{{define "posts"}}
<div id="posts">
    {{- range .Data}}
    {{ template "order" .}}
    {{- end}}

    <div class="field is-grouped is-grouped-centered">
        {{- if not $.Pager.IsBeginning}}
        <p class="control">
            <button class="button is-primary" hx-swap="outerHTML" hx-get="/?page={{sub $.Pager.Page 1}}"
                hx-target="#posts">Previous page</button>
        </p>
        {{- end}}
        {{- if not $.Pager.IsEnd}}
        <p class="control">
            <button class="button is-primary" hx-swap="outerHTML" hx-get="/?page={{add $.Pager.Page 1}}"
                hx-target="#posts">Next page</button>
        </p>
        {{- end}}
    </div>
</div>
{{end}}

{{define "file-msg"}}
<!-- <div class="block"></div> -->
<!-- <article class="message is-small is-warning" x-data="{show: true}" x-show="show"> -->
<!--     <div class="message-header"> -->
<!--         <p>Serving files</p> -->
<!--         <button class="delete is-small" aria-label="delete" @click="show = false"></button> -->
<!--     </div> -->
<!--     <div class="message-body"> -->
<!--         In the example posts above, check how the file URL contains a cache-buster query parameter which changes only -->
<!--         when the app is restarted. -->
<!--         Static files also contain cache-control headers which are configured via middleware. -->
<!--         You can also use AlpineJS to dismiss this message. -->
<!--     </div> -->
<!-- </article> -->
{{end}}
