{{define "content"}}
{{- if not (eq .HTMX.Request.Target "orders")}}
{{template "top-content" .}}
{{- end}}

{{template "orders" .}}
{{end}}

{{define "top-content"}}
<section class="section mb-4">
    <h1 class="text-2xl mb-4">Recent orders</h1>
    {{- if not .Data}}
    <div role="alert" class="alert shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-info shrink-0 w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        <div>
            <h3 class="font-bold">You haven't order any ticket yet!</h3>
        </div>
        <a href='{{call .ToURL  "order"}}' class="btn btn-sm">Order</a>
    </div>
    {{end}}
</section>
{{end}}

{{define "orders"}}
<div id="orders">
    {{- range .Data}}
    {{ template "order" .}}
    {{- end}}

    <div class="flex justify-center">
        <div class="join">
            <button class="join-item btn" {{- if $.Pager.IsBeginning}} disabled {{- end}} hx-swap="outerHTML"
                hx-get="/?page={{sub $.Pager.Page 1}}" hx-target="#orders">«</button>
            <button class="join-item btn">Page {{$.Pager.Page}} / {{$.Pager.Pages}}</button>
            <button class="join-item btn" {{- if $.Pager.IsEnd}} disabled {{- end}} hx-swap="outerHTML"
                hx-get="/?page={{add $.Pager.Page 1}}" hx-target="#orders">»</button>
        </div>
    </div>
</div>
{{end}}
